# Бэкенд-часть SPA веб-приложения "Трекер привычек" # 
# Контекст
В 2018 году Джеймс Клир написал книгу «Атомные привычки», которая посвящена приобретению новых полезных привычек и искоренению старых плохих привычек. Заказчик прочитал книгу, впечатлился и обратился к вам с запросом реализовать трекер полезных привычек.
В рамках проекта реализована бэкенд-часть SPA веб-приложения.
# Модели
В книге хороший пример привычки описывается как конкретное действие, которое можно уложить в одно предложение:
- "я буду [ДЕЙСТВИЕ] в [ВРЕМЯ] в [МЕСТО]"

За каждую полезную привычку необходимо себя вознаграждать или сразу после делать приятную привычку. 
Но при этом привычка не должна расходовать на выполнение больше 2 минут. Исходя из этого получаем модель "привычка".

**Привычка:**
- Пользователь — создатель привычки.
- Место — место, в котором необходимо выполнять привычку.
- Время — время, когда необходимо выполнять привычку.
- Действие — действие, которое представляет из себя привычка.
- Признак приятной привычки — привычка, которую можно привязать к выполнению полезной привычки.
- Связанная привычка — привычка, которая связана с другой привычкой, важно указывать для полезных привычек, но не для приятных.
- Периодичность (по умолчанию ежедневная) — периодичность выполнения привычки для напоминания в днях.
- Вознаграждение — чем пользователь должен себя вознаградить после выполнения.
- Время на выполнение — время, которое предположительно потратит пользователь на выполнение привычки.
- Признак публичности — привычки можно публиковать в общий доступ, чтобы другие пользователи могли брать в пример чужие привычки.

**Валидаторы**
- Исключен одновременный выбор связанной привычки и указания вознаграждения.
- Время выполнения должно быть не больше 120 секунд.
- В связанные привычки могут попадать только привычки с признаком приятной привычки.
- У приятной привычки не может быть вознаграждения или связанной привычки.
- Нельзя выполнять привычку реже, чем 1 раз в 7 дней.

**Пагинация**
- Для вывода списка привычек реализована пагинация с выводом по 5 привычек на страницу.

**Права доступа**
- Каждый пользователь имеет доступ только к своим привычкам по механизму CRUD.
- Пользователь может видеть список публичных привычек без возможности их как-то редактировать или удалять.

**Эндпоинты**
- Регистрация
- Авторизация
- Список привычек текущего пользователя с пагинацией
- Список публичных привычек
- Создание привычки
- Редактирование привычки
- Удаление привычки

**Интеграция**
- Реализована работа с отложенными задачами для напоминания о том, в какое время какие привычки необходимо выполнять.
- Для этого потребуется интегрировать сервис с мессенджером Telegram, который будет заниматься рассылкой уведомлений.

**Безопасность**
- Для проекта настроен CORS, чтобы фронтенд мог подключаться к проекту на развернутом сервере.

**Документация**
- Для реализации экранов силами фронтенд-разработчиков настроен вывод документации. 

**По итогу:**
- Настроена интеграция с Telegram.
- Реализована пагинация (по 5 привычек на страницу).
- Использованы переменные окружения.
- Все необходимые модели описаны (Users, Habits).
- Все необходимые эндпоинты реализованы:
    - Регистрация пользователя
    - Авторизация пользователя
    - CRUD привычки и пользователя
- Настроены валидаторы:
    - Исключить одновременный выбор связанной привычки и указания вознаграждения.
    - Время выполнения должно быть не больше 120 секунд.
    - В связанные привычки могут попадать только привычки с признаком приятной привычки.
    - У приятной привычки не может быть вознаграждения или связанной привычки. 
    - Нельзя выполнять привычку реже, чем 1 раз в 7 дней.
-Описанные права доступа:
    - Каждый пользователь имеет доступ только к своим привычкам по механизму CRUD.
    - Пользователь может видеть список публичных привычек без возможности их как-то редактировать или удалять.
- Настроены отложенные задачи через Celery.
- Имеется список зависимостей.
- Результат проверки Flake8 равен 100%.
- Проект выложен на GitHub.
- Настроен CORS.
- Создана схема документации (Swagger , Redoc).

**Технологии в проекте:**

- Python, Celery, Redis, Django, DRF, PostgreSQL, JWT, Stripe, Unittest,

Для создания и запуска docker-контейнера выполни команду в терминале в папке проекта:

        docker-compose up -d --build

Команды:

        source env/bin/activate - активация виртуального окружения
        pip install -r requirements.txt - установка зависимостей
        .env - этот файл необходимо создать в корне проекта и заполнить по шаблону .env.example
        celery -A config worker --beat --loglevel=info - запуск celery
        python manage.py test - запуск тестов 
        coverage report - отчет по тестам

